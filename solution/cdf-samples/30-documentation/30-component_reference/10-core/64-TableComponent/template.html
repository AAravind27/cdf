<script type="text/javascript"
	src="GetCDFResource?resource=/cdf-samples/30-documentation/30-component_reference/ui.tabs.js"></script>
<script type="text/javascript"
	src="GetCDFResource?resource=/cdf-samples/30-documentation/30-component_reference/MetaLayerSamples.js"></script>
<div class="shadow">

	<div class="contents">

		<h2>TableComponent</h2>

		<h3>Description</h3>
		<p>
		This is a component that can easily generate a data table whithout needing a xaction file. The resultset is returned
		from a mdx or sql query. In case of mdx queries, a role will be passed to mondrian if the session variable 'role' is
		defined, allowing row level security.

		</p>

		<h3>Options</h3>

		<dl class="documentation">
			<dt>name</dt>
			<dd>The name of the component</dd>

			<dt>type</dt>
			<dd><code>tableComponent</code></dd>

			<dt>listeners</dt>
			<dd><i>Array - </i> Parameters who this component will react to</dd>

			<dt>chartDefinition</dt>
			<dd>MetaLayer object with the definition of chart (see MetaLayer options)</dd>

			<dt>htmlObject</dt>
			<dd>Id of the component (usually a div or a span tag) to be replaced by the result</dd>

			<dt>executeAtStart</dt>
			<dd>True to execute the component at start, false otherwise</dd>

			<dt>tooltip</dt>
			<dd>Tooltip to be displayed when mouse hovers</dd>

			<dt>preExecution</dt>
			<dd><i>Function - </i> Function to be called before the component is executed</dd>

			<dt>postExecution</dt>
			<dd><i>Function - </i> Function to be called after the component is executed</dd>

		</dl>

		<h3>MetaLayer options</h3>

		<dl class="documentation">

			<dt>queryType</dt>
			<dd>Type of query to read results from. Can be sql or mdx. Default: mdx</dd>

			<dt>jndi</dt> 
			<dd>Connection to use for the query</dd>

			<dt>query</dt> 
			<dd>sql or mdx Query to execute</dd>

			<dt>cube</dt> 
			<dd>Cube name to use when queryType is mdx</dd>

			<dt>catalog</dt> 
			<dd>Mondrian schema to use when queryType is mdx</dd>
			
			<dt>colHeaders</dt> 
			<dd>The table column header. Required: true</dd>
			
			<dt>colTypes</dt> 
			<dd>The table column types.</dd>
			
			<dt>colFormats</dt> 
			<dd>The table column formats.</dd>
			
			<dt>paginate</dt> 
			<dd>Paginate option. Default: true</dd>

			<dt>filter</dt> 
			<dd>Filter option. Default: true</dd>
			
			<dt>info</dt> 
			<dd>Display filter information. Default: true</dd>
			
			<dt>sort</dt> 
			<dd>Sorts the data. Default: true</dd>
			
			<dt>displayLength</dt> 
			<dd>The page lengh</dd>
			
		</dl>

		<h3>Sample</h3>

		<div id="example" class="flora">
			<ul>

				<li><a href="#sample"><span>Sample</span></a></li>
				<li><a href="#code"><span>Code</span></a></li>
			</ul>
			<div id="sample">

				<div id="sampleObject"></div>

			</div>


				<div id="code">
					<textarea cols="80" rows="40" id="samplecode">

var MetaLayerHome2 = {
topTenCustomerDefinition: {
	colHeaders: ["Customers","Sales"],
	colTypes: ['string','numeric'],
	colFormats: [null,'%.0f'],
	queryType: 'mdx',
	displayLength: 5,
	
	catalog: 'solution:steel-wheels/analysis/steelwheels.mondrian.xml',
	jndi: "SampleData",
	query: function(){

		var query = "select NON EMPTY {[Measures].[Sales]} ON COLUMNS,"+
		" NON EMPTY TopCount([Customers].[All Customers].Children, 10.0, [Measures].[Sales]) " +
		" ON ROWS from [SteelWheelsSales]"
		return query;
	}
}
};

var topTenCustomers = 
{
	name: "topTenCustomers",
	type: "tableComponent",
	chartDefinition: MetaLayerHome2.topTenCustomerDefinition,
	htmlObject: "sampleObject",
	executeAtStart: true
};
Dashboards.init([topTenCustomers]);
					</textarea>
					<br />
					<button onclick="evaluateCode(true)">Try me</button>
				</div>
			</div>

		</div>
	</div>

	<script language="javascript" type="text/javascript">

	var tabs = $("#example").tabs();
	evaluateCode(false);

</script>
